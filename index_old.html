<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Filter</title>
    <style>
        /* Add your CSS styles here */
        body {
            font-family: Arial, sans-serif;
        }

        h1 {
            text-align: center;
        }

        form {
            text-align: center;
            margin: 20px auto;
        }

        label {
            display: inline-block;
            width: 100px;
            font-weight: bold;
        }

        input[type="range"] {
            width: 200px;
        }

        select {
            width: 200px;
        }

        input[type="submit"] {
            margin-left: 10px;
            padding: 5px 10px;
            background-color: #0074d9;
            color: white;
            border: none;
            cursor: pointer;
        }

        input[type="submit"]:hover {
            background-color: #0056b3;
        }

        #movie-list {
            text-align: center;
        }

        ul {
            list-style: none;
            padding: 0;
        }

        li {
            margin: 5px 0;
        }

        .movie-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }

        .movie-item {
            width: 25%;
            /* Adjust the width as needed for spacing */
            margin-bottom: 20px;
            text-align: center;
        }

        .movie-item img {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>

<body>
    <header>
        <h1>Movie Filter</h1>
    </header>

    <form id="filter-form">
        <label for="start-year">Start Year:</label>
        <input type="number" id="start-year" min="1900" max="2099" step="1">

        <label for="end-year">End Year:</label>
        <input type="number" id="end-year" min="1900" max="2099" step="1">

        <label for="genre">Genre:</label>
        <select id="genre">
            <option value="">All</option>
            <option value="Action">Action</option>
            <option value="Comedy">Comedy</option>
            <option value="Crime">Drama</option>
            <option value="Drama">Drama</option>
            <option value="Romance">Drama</option>
            <!-- Add more genres as needed -->
        </select>

        <input type="submit" value="Filter">
    </form>

    <div id="movie-list">
        <!-- Movie list will be displayed here -->
    </div>

    <footer>
        <p>&copy; 2023 Movie Filter. All rights reserved.</p>
    </footer>

    <script>
        // JavaScript code for filtering movies
        document.getElementById("filter-form").addEventListener("submit", function (e) {
            e.preventDefault(); // Prevent the form from submitting and refreshing the page

            // Get selected start and end years and genre
            const startYear = document.getElementById("start-year").value;
            const endYear = document.getElementById("end-year").value;
            const selectedGenre = document.getElementById("genre").value;

            // Filter movies based on selected filters
            const filteredMovies = filterMovies(startYear, endYear, selectedGenre);

            // Display filtered movies in the "movie-list" section
            displayMovies(filteredMovies);
        });

        // Sample movie data (replace this with your actual data)
        const movies = [
            { "title": "The Shawshank Redemption", "year": "1994", "genre": "Drama" },
            { "title": "Pulp Fiction", "year": "1994", "genre": "Crime, Drama" },
            { "title": "The Godfather", "year": "1972", "genre": "Crime, Drama" },
            { "title": "The Dark Knight", "year": "2008", "genre": "Action, Crime, Drama" },
            { "title": "Schindler's List", "year": "1993", "genre": "Biography, Drama, History" },
            { "title": "Forrest Gump", "year": "1994", "genre": "Drama, Romance" },
            { "title": "Fight Club", "year": "1999", "genre": "Drama" },
            { "title": "Inception", "year": "2010", "genre": "Action, Adventure, Sci-Fi" },
            { "title": "The Matrix", "year": "1999", "genre": "Action, Sci-Fi" },
            { "title": "The Lord of the Rings: The Fellowship of the Ring", "year": "2001", "genre": "Adventure, Drama, Fantasy" },
            { "title": "The Lord of the Rings: The Two Towers", "year": "2002", "genre": "Adventure, Drama, Fantasy" },
            { "title": "The Lord of the Rings: The Return of the King", "year": "2003", "genre": "Adventure, Drama, Fantasy" },
            { "title": "Goodfellas", "year": "1990", "genre": "Biography, Crime, Drama" },
            { "title": "The Silence of the Lambs", "year": "1991", "genre": "Crime, Drama, Thriller" },
            { "title": "Saving Private Ryan", "year": "1998", "genre": "Drama, War" },
            { "title": "Gladiator", "year": "2000", "genre": "Action, Adventure, Drama" },
            { "title": "The Departed", "year": "2006", "genre": "Crime, Drama, Thriller" },
            { "title": "The Green Mile", "year": "1999", "genre": "Crime, Drama, Fantasy" },
            { "title": "The Godfather: Part II", "year": "1974", "genre": "Crime, Drama" },
            { "title": "The Avengers", "year": "2012", "genre": "Action, Adventure, Sci-Fi" },
            { "title": "The Social Network", "year": "2010", "genre": "Biography, Drama" },
            { "title": "Jurassic Park", "year": "1993", "genre": "Action, Adventure, Sci-Fi" },
            { "title": "The Lion King", "year": "1994", "genre": "Animation, Adventure, Drama" },
            { "title": "Avatar", "year": "2009", "genre": "Action, Adventure, Fantasy" },
            { "title": "The Martian", "year": "2015", "genre": "Adventure, Drama, Sci-Fi" },
            { "title": "The Pursuit of Happyness", "year": "2006", "genre": "Biography, Drama" },
            { "title": "Good Will Hunting", "year": "1997", "genre": "Drama, Romance" },
            { "title": "The Prestige", "year": "2006", "genre": "Drama, Mystery, Sci-Fi" },
            { "title": "The Truman Show", "year": "1998", "genre": "Comedy, Drama, Sci-Fi" },
            { "title": "The Sixth Sense", "year": "1999", "genre": "Drama, Mystery, Thriller" },
            { "title": "The Departed", "year": "2006", "genre": "Crime, Drama, Thriller" }
        ];


        function filterMovies(startYear, endYear, genre) {
            return movies.filter(movie => {
                return (
                    (startYear === "" || parseInt(movie.year) >= parseInt(startYear)) &&
                    (endYear === "" || parseInt(movie.year) <= parseInt(endYear)) &&
                    (genre === "" || movie.genre.includes(genre))
                );
            });
        }

        async function fetchMoviePoster(title) {
            const apiKey = '7f4df06e';
            const apiUrl = `https://www.omdbapi.com/?t=${encodeURIComponent(title)}&apikey=${apiKey}`;

            try {
                const response = await fetch(apiUrl);
                const data = await response.json();
                return data.Poster;
            } catch (error) {
                console.error("Error fetching movie poster:", error);
                return null;
            }
        }


        // Function to shuffle an array using Fisher-Yates algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // ... (Your existing code)

        async function displayMovies(filteredMovies) {
            const movieListDiv = document.getElementById("movie-list");
            movieListDiv.innerHTML = "";

            if (filteredMovies.length === 0) {
                movieListDiv.innerHTML = "<p>No movies found.</p>";
            } else {
                const shuffledMovies = shuffleArray(filteredMovies); // Shuffle the movies

                const movieGrid = document.createElement("div");
                movieGrid.classList.add("movie-grid");

                for (const movie of shuffledMovies) {
                    const movieItem = document.createElement("div");
                    movieItem.classList.add("movie-item");

                    const posterUrl = await fetchMoviePoster(movie.title);

                    if (posterUrl) {
                        const img = document.createElement("img");
                        img.src = posterUrl;
                        img.alt = `${movie.title} Poster`;
                        movieItem.appendChild(img);
                    }

                    const details = document.createElement("div");
                    details.textContent = `${movie.title} (${movie.year}, ${movie.genre})`;
                    movieItem.appendChild(details);

                    movieGrid.appendChild(movieItem);
                }

                movieListDiv.appendChild(movieGrid);
            }
        }


    </script>
</body>

</html>